pipeline {
    agent any
    tools {
            maven 'maven-3.8.3'
            nodejs 'nodejs'

    }
    script {
      def newmanVersion = "5.3.2" // Newman sürüm numarasını güncelleyin
      def npmRegistry = "https://registry.npmjs.org/" // npm registry URL'sini gerektiğinde güncelleyin
      sh "npm config set registry ${npmRegistry}"
      sh "npm install -g newman@${newmanVersion}"
    }

    stages {
        stage('build') {
            steps {
                echo 'Compiling the java source code'
                bat 'mvn compile'

            }
        }
        stage('run') {
            steps {
                echo 'Running the compiled java code.'
                bat 'mvn test'

            }
        }
           stage('postman') {
                    steps {

                               bat 'newman run C:/Users/Baran/Desktop/oss_postman.json'
                                }

                }
    }
}