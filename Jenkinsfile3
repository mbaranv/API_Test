pipeline {
    agent any
    tools {
            maven 'maven-3.8.3'
            nodejs 'nodejs'

    }

    stages {
        stage('Install Dependencies') {
          steps {
            script {
              def newmanVersion = "5.3.2" // Newman sürüm numarasını güncelleyin
              def npmRegistry = "https://registry.npmjs.org/" // npm registry URL'sini gerektiğinde güncelleyin
              bat "npm config set registry ${npmRegistry}"
              bat "npm install -g newman@${newmanVersion}"
            }
          }
          }
        stage('build') {
            steps {
                echo 'Compiling the java source code'
                bat 'mvn compile'

            }
        }
        stage('run') {
            steps {
                echo 'Running the compiled java code.'
                bat 'mvn test'

            }
        }
           stage('postman') {
                    steps {

                               bat 'newman run C:/Users/Baran/Desktop/oss_postman.json'
                                }

                }
    }
}